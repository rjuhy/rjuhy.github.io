<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>用户数据存储系统</title>
	<style>
		:root {
			--primary-color: #4a6fa5;
			--secondary-color: #6b8cbc;
			--accent-color: #ff7e5f;
			--light-color: #f8f9fa;
			--dark-color: #343a40;
			--success-color: #28a745;
			--error-color: #dc3545;
		}
		
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}
		
		body {
			background-color: #f5f7fa;
			color: var(--dark-color);
			line-height: 1.6;
		}
		
		.container {
			max-width: 800px;
			margin: 2rem auto;
			padding: 0 1rem;
		}
		
		header {
			text-align: center;
			margin-bottom: 2rem;
		}
		
		h1 {
			color: var(--primary-color);
			margin-bottom: 0.5rem;
		}
		
		.card {
			background: white;
			border-radius: 10px;
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
			padding: 2rem;
			margin-bottom: 2rem;
		}
		
		.form-group {
			margin-bottom: 1.5rem;
		}
		
		label {
			display: block;
			margin-bottom: 0.5rem;
			font-weight: 600;
		}
		
		input, textarea, select {
			width: 100%;
			padding: 0.75rem;
			border: 1px solid #ddd;
			border-radius: 5px;
			font-size: 1rem;
			transition: border-color 0.3s;
		}
		
		input:focus, textarea:focus, select:focus {
			outline: none;
			border-color: var(--primary-color);
			box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);
		}
		
		textarea {
			min-height: 120px;
			resize: vertical;
		}
		
		.btn {
			display: inline-block;
			background: var(--primary-color);
			color: white;
			padding: 0.75rem 1.5rem;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 1rem;
			font-weight: 600;
			transition: background 0.3s;
		}
		
		.btn:hover {
			background: var(--secondary-color);
		}
		
		.btn-block {
			display: block;
			width: 100%;
		}
		
		.response-area {
			margin-top: 2rem;
			padding: 1rem;
			border-radius: 5px;
			display: none;
		}
		
		.success {
			background-color: rgba(40, 167, 69, 0.1);
			border: 1px solid var(--success-color);
			color: var(--success-color);
		}
		
		.error {
			background-color: rgba(220, 53, 69, 0.1);
			border: 1px solid var(--error-color);
			color: var(--error-color);
		}
		
		.stored-data {
			margin-top: 2rem;
		}
		
		.data-item {
			background: white;
			border-left: 4px solid var(--primary-color);
			padding: 1rem;
			margin-bottom: 1rem;
			border-radius: 0 5px 5px 0;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
		}
		
		.data-item h3 {
			margin-bottom: 0.5rem;
			color: var(--primary-color);
		}
		
		.data-item p {
			margin-bottom: 0.25rem;
		}
		
		.error-message {
			color: var(--error-color);
			font-size: 0.875rem;
			margin-top: 0.25rem;
			display: none;
		}
		
		@media (max-width: 600px) {
			.container {
				padding: 0 0.5rem;
			}
			
			.card {
				padding: 1.5rem;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<header>
			<h1>用户数据存储系统</h1>
			<p>将您的信息安全地保存到服务器，真的）</p>
		</header>
		
		<div class="card">
			<h2>提交您的信息</h2>
			<form id="userForm">
				<div class="form-group">
					<label for="name">姓名</label>
					<input type="text" id="name" name="name" required>
					<div class="error-message" id="nameError">请输入有效的姓名</div>
				</div>
				
				<div class="form-group">
					<label for="email">电子邮箱</label>
					<input type="email" id="email" name="email" required>
					<div class="error-message" id="emailError">请输入有效的电子邮箱地址</div>
				</div>
				
				<div class="form-group">
					<label for="category">类别</label>
					<select id="category" name="category" required>
						<option value="">请选择类别</option>
						<option value="personal">个人</option>
						<option value="business">商务</option>
						<option value="education">教育</option>
						<option value="other">其他</option>
					</select>
					<div class="error-message" id="categoryError">请选择一个类别</div>
				</div>
				
				<div class="form-group">
					<label for="message">消息</label>
					<textarea id="message" name="message" placeholder="请输入您想保存的信息..." required></textarea>
					<div class="error-message" id="messageError">消息内容不能为空</div>
				</div>
				
				<button type="submit" class="btn btn-block">提交到服务器</button>
			</form>
			
			<div id="responseArea" class="response-area"></div>
		</div>
		
		<div class="card stored-data">
			<h2>已存储的数据</h2>
			<div id="storedDataList">
				<!-- 存储的数据将在这里显示 -->
			</div>
		</div>
	</div>

	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const form = document.getElementById('userForm');
			const responseArea = document.getElementById('responseArea');
			const storedDataList = document.getElementById('storedDataList');
			
			// 从localStorage加载已存储的数据
			loadStoredData();
			
			form.addEventListener('submit', function(e) {
				e.preventDefault();
				
				// 清除之前的错误信息
				clearErrors();
				
				// 验证表单
				if (validateForm()) {
					// 获取表单数据
					const formData = {
						name: document.getElementById('name').value,
						email: document.getElementById('email').value,
						category: document.getElementById('category').value,
						message: document.getElementById('message').value,
						timestamp: new Date().toLocaleString()
					};
					
					// 显示加载状态
					showResponse('正在提交数据到服务器...', 'info');
					
					// 模拟服务器请求（在实际应用中，这里应该是真实的API调用）
					setTimeout(() => {
					fetch('/api/save-user-data', {
	method: 'POST',
	headers: {
		'Content-Type': 'application/json',
	},
	body: JSON.stringify(formData)
})
.then(response => response.json())
.then(data => {
	// 处理服务器响应
	showResponse('数据已成功保存到服务器！', 'success');
})
.catch(error => {
	// 处理错误
	showResponse('保存数据时出错，请稍后重试', 'error');
});


						// 保存数据到localStorage（模拟服务器存储）
						saveToStorage(formData);
						
						// 显示成功消息
						showResponse('数据已成功保存到服务器！', 'success');
						
						// 重新加载存储的数据
						loadStoredData();
						
						// 重置表单
						form.reset();
					}, 1500);
				}
			});
			
			function validateForm() {
				let isValid = true;
				
				// 验证姓名
				const name = document.getElementById('name').value.trim();
				if (name.length < 2) {
					showError('nameError', '姓名至少需要2个字符');
					isValid = false;
				}
				
				// 验证邮箱
				const email = document.getElementById('email').value.trim();
				const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
				if (!emailRegex.test(email)) {
					showError('emailError', '请输入有效的电子邮箱地址');
					isValid = false;
				}
				
				// 验证类别
				const category = document.getElementById('category').value;
				if (!category) {
					showError('categoryError', '请选择一个类别');
					isValid = false;
				}
				
				// 验证消息
				const message = document.getElementById('message').value.trim();
				if (message.length < 5) {
					showError('messageError', '消息内容至少需要5个字符');
					isValid = false;
				}
				
				return isValid;
			}
			
			function showError(elementId, message) {
				const errorElement = document.getElementById(elementId);
				errorElement.textContent = message;
				errorElement.style.display = 'block';
			}
			
			function clearErrors() {
				const errorElements = document.querySelectorAll('.error-message');
				errorElements.forEach(element => {
					element.style.display = 'none';
				});
			}
			
			function showResponse(message, type) {
				responseArea.textContent = message;
				responseArea.className = 'response-area';
				responseArea.classList.add(type);
				responseArea.style.display = 'block';
				
				// 如果是成功消息，3秒后自动隐藏
				if (type === 'success') {
					setTimeout(() => {
						responseArea.style.display = 'none';
					}, 3000);
				}
			}
			
			function saveToStorage(data) {
				// 获取现有数据或初始化空数组
				const storedData = JSON.parse(localStorage.getItem('userData')) || [];
				
				// 添加新数据
				storedData.push(data);
				
				// 保存回localStorage
				localStorage.setItem('userData', JSON.stringify(storedData));
			}
			
			function loadStoredData() {
				// 从localStorage获取数据
				const storedData = JSON.parse(localStorage.getItem('userData')) || [];
				
				// 清空现有显示
				storedDataList.innerHTML = '';
				
				// 如果没有数据，显示提示
				if (storedData.length === 0) {
					storedDataList.innerHTML = '<p>暂无存储的数据</p>';
					return;
				}
				
				// 显示数据（最新的在前面）
				storedData.reverse().forEach((item, index) => {
					const dataItem = document.createElement('div');
					dataItem.className = 'data-item';
					dataItem.innerHTML = `
						<h3>${item.name} (${item.category})</h3>
						<p><strong>邮箱:</strong> ${item.email}</p>
						<p><strong>消息:</strong> ${item.message}</p>
						<p><strong>提交时间:</strong> ${item.timestamp}</p>
					`;
					storedDataList.appendChild(dataItem);
				});
			}
		});
	</script>
</body>
</html>